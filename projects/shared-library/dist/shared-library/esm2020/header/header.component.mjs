import { Component, Input, ViewChild } from '@angular/core';
import { NavigationEnd } from '@angular/router';
import { UserRoles } from '../core/enums/lib-global-enum';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@angular/common";
import * as i3 from "@angular/material/menu";
import * as i4 from "@angular/material/tooltip";
export class HeaderComponent {
    constructor(router) {
        this.router = router;
        this.logoURL = '';
        this.initials = '';
        this.loggedIn = true;
        this.username = '';
        this.email = '';
        this.role = '';
        this.imageSrc = '/assets/help.svg';
        this.helpFaqTooltip = 'Help & FAQ';
        this.selectedLanguage = 'EN';
        this.mainLanguage = 'EN';
        this.secondLanguage = 'FR';
        this.userRoles = UserRoles;
        this.isHomeUrl = false;
    }
    ngOnChanges(changes) {
        if (changes.currentUser) {
            this.currentUser = changes.currentUser.currentValue;
            if (this.currentUser) {
                this.username = `${this.currentUser.firstname} ${this.currentUser.lastname}`;
                this.role = this.currentUser.role;
                this.email = this.currentUser.email;
                this.initials = this.currentUser.firstname.charAt(0);
            }
        }
        if (changes.loggedIn) {
            this.loggedIn = changes.loggedIn.currentValue;
        }
    }
    ngOnInit() {
        this.router.events.subscribe(event => {
            if (event instanceof NavigationEnd) {
                const currentUrl = this.router.url;
                this.isHomeUrl = currentUrl === '/home';
            }
        });
    }
    logOut() {
        localStorage.clear();
        this.router.navigate(['/login']);
    }
    navigateToHelp() {
        const url = 'https://mass-analytics.atlassian.net/wiki/x/BgCNAg';
        window.open(url, '_blank');
    }
    navigateToManageTeam() {
        this.router.navigate(['/manage-team']);
    }
    navigateToProjects() {
        this.router.navigate(['/home']);
    }
    navigateToAccountSettings() {
        this.router.navigate(['/account-settings']);
    }
    /** SET LANGUAGE FOR APPLICATION **/
    setLanguage(selectedLanguage) {
        if (selectedLanguage !== this.selectedLanguage) {
            this.secondLanguage = this.selectedLanguage;
            this.selectedLanguage = selectedLanguage;
        }
        else if (selectedLanguage !== this.secondLanguage) {
            this.selectedLanguage = this.secondLanguage;
            this.secondLanguage = selectedLanguage;
        }
    }
}
HeaderComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: HeaderComponent, deps: [{ token: i1.Router }], target: i0.ɵɵFactoryTarget.Component });
HeaderComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: HeaderComponent, selector: "app-header", inputs: { logoURL: "logoURL", loggedIn: "loggedIn", currentUser: "currentUser" }, viewQueries: [{ propertyName: "menuTrigger", first: true, predicate: ["menuTrigger"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"header\">\r\n  <div class=\"header-container\">\r\n    <div class=\"left-side\">\r\n      <img [src]=\"logoURL\" alt=\"Logo\" routerLink=\"/home\" />\r\n      <ul>\r\n        <li *ngIf=\"loggedIn\" [ngClass]=\"isHomeUrl ? 'home-url' : ''\" class=\"project\" (click)=\"navigateToProjects()\">Projects</li>\r\n      </ul>\r\n    </div>\r\n    <div [ngClass]=\"!loggedIn ? 'right-side not-logged-in' : 'right-side'\">\r\n      <img\r\n        *ngIf=\"loggedIn\"\r\n        class=\"help\"\r\n        [src]=\"imageSrc\"\r\n        (mouseenter)=\"imageSrc = '/assets/help_bleu.svg'\"\r\n        (mouseleave)=\"imageSrc = '/assets/help.svg'\"\r\n        alt=\"help SVG\"\r\n        [matTooltip]=\"helpFaqTooltip\"\r\n        (click)=\"navigateToHelp()\"\r\n      />\r\n      <div *ngIf=\"loggedIn\" class=\"initial\" mat-button [matMenuTriggerFor]=\"menu\">\r\n        {{ initials | uppercase }}\r\n      </div>\r\n      <div class=\"selected-language\" [matMenuTriggerFor]=\"menuLanguage\">{{ selectedLanguage }}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- switch between language-->\r\n<mat-menu panelClass=\"panel-menu\" #menuLanguage=\"matMenu\" class=\"language-menu-item\">\r\n  <div class=\"menu-language\">\r\n    <button mat-menu-item  (click)=\"setLanguage(secondLanguage)\">{{ secondLanguage }}</button>\r\n  </div>\r\n</mat-menu>\r\n\r\n<mat-menu #menu=\"matMenu\" >\r\n  <div class=\"avatar-popup\">\r\n    <div class=\"user-details-container\">\r\n      <ul>\r\n        <li class=\"username\">\r\n          {{ username }}\r\n        </li>\r\n        <li class=\"userEmail\">\r\n          {{ email }}\r\n        </li>\r\n        <li class=\"userRole\" *ngIf=\"role\">\r\n          {{ role }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <hr />\r\n    <div class=\"actions-container\">\r\n      <button class=\"header-menu\" (click)=\"navigateToManageTeam()\" *ngIf=\"role === userRoles.ADMIN\">Manage team</button>\r\n      <button class=\"header-menu\" (click)=\"navigateToAccountSettings()\">Account settings</button>\r\n      <button class=\"header-menu\" (click)=\"logOut()\">Log out</button>\r\n    </div>\r\n  </div>\r\n</mat-menu>\r\n", styles: [".header{position:absolute;top:0;left:0;right:0;z-index:2;border-bottom:1px solid #acc8ff;background-color:#fff;height:59px}.header .header-container{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;height:100%}.header .header-container .left-side{display:inline-flex;align-items:center;justify-content:center}.header .header-container .left-side img{cursor:pointer;margin-left:24px;margin-right:8.81rem;margin-bottom:8px}.header .header-container .left-side ul{cursor:pointer;height:100%;margin:0;padding:0}.header .header-container .left-side .project{width:103px;height:58px;margin-bottom:0!important;flex-shrink:0;display:inline-flex;align-items:center;justify-content:center;color:#2b2367;text-align:center;font-style:normal;font-weight:600;font-family:Red Hat Text,sans-serif;font-size:14px;line-height:19px;letter-spacing:0em}.header .header-container .left-side .project:hover,.header .header-container .home-url{background:#e4edff;color:#105bee;width:103px;height:58px}.header .header-container .not-logged-in{width:min-content!important}.header .header-container .right-side{justify-content:space-between;display:inline-flex;align-items:center;gap:1.5rem;margin-right:1.5rem}.header .header-container .right-side .help{cursor:pointer;height:31px;width:31px}.header .header-container .right-side .initial{cursor:pointer;width:31px;height:31px;text-transform:uppercase;border-radius:50%;color:#fff;background-color:#105bee;display:inline-flex;align-items:center;justify-content:center;font-size:14px;font-style:normal;font-weight:700;line-height:normal}.header .header-container .right-side .selected-language{font-family:Red Hat Text,sans-serif!important;cursor:pointer;color:#2b2367;min-width:3rem;font-size:14px;font-style:normal;font-weight:500;line-height:normal;float:right}::ng-deep .cdk-overlay-container{max-width:none!important}::ng-deep .cdk-overlay-container:after{top:-5px;left:20px;width:0;height:0;content:\"\";position:absolute}::ng-deep .cdk-overlay-container .mat-menu-panel{position:absolute;top:0;left:0;z-index:9999}::ng-deep .initial.mat-button{position:relative}.avatar-popup{background-color:#fff;width:max-content;height:max-content;text-align:left;padding:5px!important;max-width:15rem}ul{list-style-type:none;padding-left:15px}li{margin-bottom:7px}.username{color:var(--black, #191842);font-size:14px;font-style:normal;font-weight:500;line-height:normal;font-family:Red Hat Text,sans-serif!important}.userEmail{color:var(--dark-blue, #2b2367);font-size:12px;font-style:normal;font-weight:300;line-height:normal;font-family:Red Hat Text,sans-serif!important}.userRole{cursor:pointer;border-radius:6px;border:.5px solid var(--primary-blue, #105bee);color:var(--primary-blue, #105bee);font-size:10px;font-style:normal;font-weight:400;line-height:normal;letter-spacing:.5px;text-transform:uppercase;width:-moz-fit-content;width:fit-content;text-align:center;padding:4px;font-family:Red Hat Text,sans-serif!important}.header-menu:hover{background-color:var(--highlight, #def5f5)}.header-menu{color:#392d93;font-size:12px;font-style:normal;font-weight:400;line-height:normal;background-color:#fff;height:27px;text-align:left;border:none;padding-left:15px;font-family:Red Hat Text,sans-serif!important}.user-details-container ul{padding:0 15px}.actions-container{display:grid;gap:10px;padding:0;border:none}hr{height:1px;background-color:#e5e8f7;border:none}::ng-deep .mdc-list{margin:0;padding:0!important}::ng-deep .mdc-tooltip__surface{background-color:#fff!important;padding:.5rem;border-radius:0!important;border:0;box-shadow:0 1px 4px #17469d40!important;color:var(--Dark-Blue, #2b2367)!important;font-family:Red Hat Text,sans-serif!important;font-size:.75rem;font-style:normal;font-weight:400;line-height:normal}::ng-deep .language-menu-item .mat-mdc-menu-content ::ng-deep span{color:var(--Links, #392d93)!important;font-family:Red Hat Text,sans-serif!important;font-size:.75rem!important;font-style:normal!important;font-weight:400!important;line-height:normal!important}::ng-deep .mat-mdc-menu-panel.mat-mdc-menu-panel{margin-top:.5rem;min-width:max-content!important;max-width:max-content!important;box-shadow:0 2px 4px #0000001a}\n"], dependencies: [{ kind: "directive", type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i3.MatMenu, selector: "mat-menu", exportAs: ["matMenu"] }, { kind: "component", type: i3.MatMenuItem, selector: "[mat-menu-item]", inputs: ["disabled", "disableRipple", "role"], exportAs: ["matMenuItem"] }, { kind: "directive", type: i3.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", exportAs: ["matMenuTrigger"] }, { kind: "directive", type: i1.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i4.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { kind: "pipe", type: i2.UpperCasePipe, name: "uppercase" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: HeaderComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-header', template: "<div class=\"header\">\r\n  <div class=\"header-container\">\r\n    <div class=\"left-side\">\r\n      <img [src]=\"logoURL\" alt=\"Logo\" routerLink=\"/home\" />\r\n      <ul>\r\n        <li *ngIf=\"loggedIn\" [ngClass]=\"isHomeUrl ? 'home-url' : ''\" class=\"project\" (click)=\"navigateToProjects()\">Projects</li>\r\n      </ul>\r\n    </div>\r\n    <div [ngClass]=\"!loggedIn ? 'right-side not-logged-in' : 'right-side'\">\r\n      <img\r\n        *ngIf=\"loggedIn\"\r\n        class=\"help\"\r\n        [src]=\"imageSrc\"\r\n        (mouseenter)=\"imageSrc = '/assets/help_bleu.svg'\"\r\n        (mouseleave)=\"imageSrc = '/assets/help.svg'\"\r\n        alt=\"help SVG\"\r\n        [matTooltip]=\"helpFaqTooltip\"\r\n        (click)=\"navigateToHelp()\"\r\n      />\r\n      <div *ngIf=\"loggedIn\" class=\"initial\" mat-button [matMenuTriggerFor]=\"menu\">\r\n        {{ initials | uppercase }}\r\n      </div>\r\n      <div class=\"selected-language\" [matMenuTriggerFor]=\"menuLanguage\">{{ selectedLanguage }}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- switch between language-->\r\n<mat-menu panelClass=\"panel-menu\" #menuLanguage=\"matMenu\" class=\"language-menu-item\">\r\n  <div class=\"menu-language\">\r\n    <button mat-menu-item  (click)=\"setLanguage(secondLanguage)\">{{ secondLanguage }}</button>\r\n  </div>\r\n</mat-menu>\r\n\r\n<mat-menu #menu=\"matMenu\" >\r\n  <div class=\"avatar-popup\">\r\n    <div class=\"user-details-container\">\r\n      <ul>\r\n        <li class=\"username\">\r\n          {{ username }}\r\n        </li>\r\n        <li class=\"userEmail\">\r\n          {{ email }}\r\n        </li>\r\n        <li class=\"userRole\" *ngIf=\"role\">\r\n          {{ role }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <hr />\r\n    <div class=\"actions-container\">\r\n      <button class=\"header-menu\" (click)=\"navigateToManageTeam()\" *ngIf=\"role === userRoles.ADMIN\">Manage team</button>\r\n      <button class=\"header-menu\" (click)=\"navigateToAccountSettings()\">Account settings</button>\r\n      <button class=\"header-menu\" (click)=\"logOut()\">Log out</button>\r\n    </div>\r\n  </div>\r\n</mat-menu>\r\n", styles: [".header{position:absolute;top:0;left:0;right:0;z-index:2;border-bottom:1px solid #acc8ff;background-color:#fff;height:59px}.header .header-container{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;height:100%}.header .header-container .left-side{display:inline-flex;align-items:center;justify-content:center}.header .header-container .left-side img{cursor:pointer;margin-left:24px;margin-right:8.81rem;margin-bottom:8px}.header .header-container .left-side ul{cursor:pointer;height:100%;margin:0;padding:0}.header .header-container .left-side .project{width:103px;height:58px;margin-bottom:0!important;flex-shrink:0;display:inline-flex;align-items:center;justify-content:center;color:#2b2367;text-align:center;font-style:normal;font-weight:600;font-family:Red Hat Text,sans-serif;font-size:14px;line-height:19px;letter-spacing:0em}.header .header-container .left-side .project:hover,.header .header-container .home-url{background:#e4edff;color:#105bee;width:103px;height:58px}.header .header-container .not-logged-in{width:min-content!important}.header .header-container .right-side{justify-content:space-between;display:inline-flex;align-items:center;gap:1.5rem;margin-right:1.5rem}.header .header-container .right-side .help{cursor:pointer;height:31px;width:31px}.header .header-container .right-side .initial{cursor:pointer;width:31px;height:31px;text-transform:uppercase;border-radius:50%;color:#fff;background-color:#105bee;display:inline-flex;align-items:center;justify-content:center;font-size:14px;font-style:normal;font-weight:700;line-height:normal}.header .header-container .right-side .selected-language{font-family:Red Hat Text,sans-serif!important;cursor:pointer;color:#2b2367;min-width:3rem;font-size:14px;font-style:normal;font-weight:500;line-height:normal;float:right}::ng-deep .cdk-overlay-container{max-width:none!important}::ng-deep .cdk-overlay-container:after{top:-5px;left:20px;width:0;height:0;content:\"\";position:absolute}::ng-deep .cdk-overlay-container .mat-menu-panel{position:absolute;top:0;left:0;z-index:9999}::ng-deep .initial.mat-button{position:relative}.avatar-popup{background-color:#fff;width:max-content;height:max-content;text-align:left;padding:5px!important;max-width:15rem}ul{list-style-type:none;padding-left:15px}li{margin-bottom:7px}.username{color:var(--black, #191842);font-size:14px;font-style:normal;font-weight:500;line-height:normal;font-family:Red Hat Text,sans-serif!important}.userEmail{color:var(--dark-blue, #2b2367);font-size:12px;font-style:normal;font-weight:300;line-height:normal;font-family:Red Hat Text,sans-serif!important}.userRole{cursor:pointer;border-radius:6px;border:.5px solid var(--primary-blue, #105bee);color:var(--primary-blue, #105bee);font-size:10px;font-style:normal;font-weight:400;line-height:normal;letter-spacing:.5px;text-transform:uppercase;width:-moz-fit-content;width:fit-content;text-align:center;padding:4px;font-family:Red Hat Text,sans-serif!important}.header-menu:hover{background-color:var(--highlight, #def5f5)}.header-menu{color:#392d93;font-size:12px;font-style:normal;font-weight:400;line-height:normal;background-color:#fff;height:27px;text-align:left;border:none;padding-left:15px;font-family:Red Hat Text,sans-serif!important}.user-details-container ul{padding:0 15px}.actions-container{display:grid;gap:10px;padding:0;border:none}hr{height:1px;background-color:#e5e8f7;border:none}::ng-deep .mdc-list{margin:0;padding:0!important}::ng-deep .mdc-tooltip__surface{background-color:#fff!important;padding:.5rem;border-radius:0!important;border:0;box-shadow:0 1px 4px #17469d40!important;color:var(--Dark-Blue, #2b2367)!important;font-family:Red Hat Text,sans-serif!important;font-size:.75rem;font-style:normal;font-weight:400;line-height:normal}::ng-deep .language-menu-item .mat-mdc-menu-content ::ng-deep span{color:var(--Links, #392d93)!important;font-family:Red Hat Text,sans-serif!important;font-size:.75rem!important;font-style:normal!important;font-weight:400!important;line-height:normal!important}::ng-deep .mat-mdc-menu-panel.mat-mdc-menu-panel{margin-top:.5rem;min-width:max-content!important;max-width:max-content!important;box-shadow:0 2px 4px #0000001a}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.Router }]; }, propDecorators: { logoURL: [{
                type: Input
            }], loggedIn: [{
                type: Input
            }], currentUser: [{
                type: Input
            }], menuTrigger: [{
                type: ViewChild,
                args: ['menuTrigger']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3NoYXJlZC1saWJyYXJ5L3NyYy9oZWFkZXIvaGVhZGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uL3Byb2plY3RzL3NoYXJlZC1saWJyYXJ5L3NyYy9oZWFkZXIvaGVhZGVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFvQyxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFOUYsT0FBTyxFQUFFLGFBQWEsRUFBVSxNQUFNLGlCQUFpQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQzs7Ozs7O0FBTTFELE1BQU0sT0FBTyxlQUFlO0lBa0IxQixZQUE2QixNQUFjO1FBQWQsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQWpCbEMsWUFBTyxHQUFHLEVBQUUsQ0FBQztRQUN0QixhQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ0wsYUFBUSxHQUFHLElBQUksQ0FBQztRQUl6QixhQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ2QsVUFBSyxHQUFHLEVBQUUsQ0FBQztRQUNYLFNBQUksR0FBRyxFQUFFLENBQUM7UUFDVixhQUFRLEdBQUcsa0JBQWtCLENBQUM7UUFDOUIsbUJBQWMsR0FBRyxZQUFZLENBQUM7UUFDOUIscUJBQWdCLEdBQUcsSUFBSSxDQUFDO1FBQ3hCLGlCQUFZLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLG1CQUFjLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLGNBQVMsR0FBRyxTQUFTLENBQUM7UUFDdEIsY0FBUyxHQUFHLEtBQUssQ0FBQztJQUU0QixDQUFDO0lBQy9DLFdBQVcsQ0FBQyxPQUFzQjtRQUNoQyxJQUFJLE9BQU8sQ0FBQyxXQUFXLEVBQUU7WUFDdkIsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQztZQUVwRCxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7Z0JBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO2dCQUM3RSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO2dCQUNsQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDO2dCQUNwQyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUN0RDtTQUNGO1FBQ0QsSUFBSSxPQUFPLENBQUMsUUFBUSxFQUFFO1lBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUM7U0FDL0M7SUFDSCxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNuQyxJQUFJLEtBQUssWUFBWSxhQUFhLEVBQUU7Z0JBQ2xDLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO2dCQUNuQyxJQUFJLENBQUMsU0FBUyxHQUFHLFVBQVUsS0FBSyxPQUFPLENBQUM7YUFDekM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxNQUFNO1FBQ0osWUFBWSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQsY0FBYztRQUNaLE1BQU0sR0FBRyxHQUFHLG9EQUFvRCxDQUFDO1FBQ2pFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxvQkFBb0I7UUFDbEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFRCxrQkFBa0I7UUFDaEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFFRCx5QkFBeUI7UUFDdkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVELG9DQUFvQztJQUNwQyxXQUFXLENBQUMsZ0JBQXFCO1FBQy9CLElBQUksZ0JBQWdCLEtBQUssSUFBSSxDQUFDLGdCQUFnQixFQUFFO1lBQzlDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDO1lBQzVDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQztTQUMxQzthQUFNLElBQUksZ0JBQWdCLEtBQUssSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNqRCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztZQUM1QyxJQUFJLENBQUMsY0FBYyxHQUFHLGdCQUFnQixDQUFDO1NBQzFDO0lBQ0gsQ0FBQzs7NEdBM0VVLGVBQWU7Z0dBQWYsZUFBZSxxUUNUNUIsb29FQXlEQTsyRkRoRGEsZUFBZTtrQkFMM0IsU0FBUzsrQkFDRSxZQUFZOzZGQUtiLE9BQU87c0JBQWYsS0FBSztnQkFFRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBRW9CLFdBQVc7c0JBQXBDLFNBQVM7dUJBQUMsYUFBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uQ2hhbmdlcywgT25Jbml0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTWF0TWVudVRyaWdnZXIgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9tZW51JztcclxuaW1wb3J0IHsgTmF2aWdhdGlvbkVuZCwgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcclxuaW1wb3J0IHsgVXNlclJvbGVzIH0gZnJvbSAnLi4vY29yZS9lbnVtcy9saWItZ2xvYmFsLWVudW0nO1xyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC1oZWFkZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9oZWFkZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2hlYWRlci5jb21wb25lbnQuc2NzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgSGVhZGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gIEBJbnB1dCgpIGxvZ29VUkwgPSAnJztcclxuICBpbml0aWFscyA9ICcnO1xyXG4gIEBJbnB1dCgpIGxvZ2dlZEluID0gdHJ1ZTtcclxuICBASW5wdXQoKSBjdXJyZW50VXNlcjogYW55O1xyXG5cclxuICBAVmlld0NoaWxkKCdtZW51VHJpZ2dlcicpIG1lbnVUcmlnZ2VyPzogTWF0TWVudVRyaWdnZXI7XHJcbiAgdXNlcm5hbWUgPSAnJztcclxuICBlbWFpbCA9ICcnO1xyXG4gIHJvbGUgPSAnJztcclxuICBpbWFnZVNyYyA9ICcvYXNzZXRzL2hlbHAuc3ZnJztcclxuICBoZWxwRmFxVG9vbHRpcCA9ICdIZWxwICYgRkFRJztcclxuICBzZWxlY3RlZExhbmd1YWdlID0gJ0VOJztcclxuICBtYWluTGFuZ3VhZ2UgPSAnRU4nO1xyXG4gIHNlY29uZExhbmd1YWdlID0gJ0ZSJztcclxuICB1c2VyUm9sZXMgPSBVc2VyUm9sZXM7XHJcbiAgaXNIb21lVXJsID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgcm91dGVyOiBSb3V0ZXIpIHt9XHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgaWYgKGNoYW5nZXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGNoYW5nZXMuY3VycmVudFVzZXIuY3VycmVudFZhbHVlO1xyXG5cclxuICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICB0aGlzLnVzZXJuYW1lID0gYCR7dGhpcy5jdXJyZW50VXNlci5maXJzdG5hbWV9ICR7dGhpcy5jdXJyZW50VXNlci5sYXN0bmFtZX1gO1xyXG4gICAgICAgIHRoaXMucm9sZSA9IHRoaXMuY3VycmVudFVzZXIucm9sZTtcclxuICAgICAgICB0aGlzLmVtYWlsID0gdGhpcy5jdXJyZW50VXNlci5lbWFpbDtcclxuICAgICAgICB0aGlzLmluaXRpYWxzID0gdGhpcy5jdXJyZW50VXNlci5maXJzdG5hbWUuY2hhckF0KDApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY2hhbmdlcy5sb2dnZWRJbikge1xyXG4gICAgICB0aGlzLmxvZ2dlZEluID0gY2hhbmdlcy5sb2dnZWRJbi5jdXJyZW50VmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMucm91dGVyLmV2ZW50cy5zdWJzY3JpYmUoZXZlbnQgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uRW5kKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVybCA9IHRoaXMucm91dGVyLnVybDtcclxuICAgICAgICB0aGlzLmlzSG9tZVVybCA9IGN1cnJlbnRVcmwgPT09ICcvaG9tZSc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbG9nT3V0KCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9sb2dpbiddKTtcclxuICB9XHJcblxyXG4gIG5hdmlnYXRlVG9IZWxwKCkge1xyXG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vbWFzcy1hbmFseXRpY3MuYXRsYXNzaWFuLm5ldC93aWtpL3gvQmdDTkFnJztcclxuICAgIHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycpO1xyXG4gIH1cclxuXHJcbiAgbmF2aWdhdGVUb01hbmFnZVRlYW0oKSB7XHJcbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9tYW5hZ2UtdGVhbSddKTtcclxuICB9XHJcblxyXG4gIG5hdmlnYXRlVG9Qcm9qZWN0cygpIHtcclxuICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL2hvbWUnXSk7XHJcbiAgfVxyXG5cclxuICBuYXZpZ2F0ZVRvQWNjb3VudFNldHRpbmdzKCkge1xyXG4gICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvYWNjb3VudC1zZXR0aW5ncyddKTtcclxuICB9XHJcblxyXG4gIC8qKiBTRVQgTEFOR1VBR0UgRk9SIEFQUExJQ0FUSU9OICoqL1xyXG4gIHNldExhbmd1YWdlKHNlbGVjdGVkTGFuZ3VhZ2U6IGFueSkge1xyXG4gICAgaWYgKHNlbGVjdGVkTGFuZ3VhZ2UgIT09IHRoaXMuc2VsZWN0ZWRMYW5ndWFnZSkge1xyXG4gICAgICB0aGlzLnNlY29uZExhbmd1YWdlID0gdGhpcy5zZWxlY3RlZExhbmd1YWdlO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkTGFuZ3VhZ2UgPSBzZWxlY3RlZExhbmd1YWdlO1xyXG4gICAgfSBlbHNlIGlmIChzZWxlY3RlZExhbmd1YWdlICE9PSB0aGlzLnNlY29uZExhbmd1YWdlKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZExhbmd1YWdlID0gdGhpcy5zZWNvbmRMYW5ndWFnZTtcclxuICAgICAgICB0aGlzLnNlY29uZExhbmd1YWdlID0gc2VsZWN0ZWRMYW5ndWFnZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiPGRpdiBjbGFzcz1cImhlYWRlclwiPlxyXG4gIDxkaXYgY2xhc3M9XCJoZWFkZXItY29udGFpbmVyXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwibGVmdC1zaWRlXCI+XHJcbiAgICAgIDxpbWcgW3NyY109XCJsb2dvVVJMXCIgYWx0PVwiTG9nb1wiIHJvdXRlckxpbms9XCIvaG9tZVwiIC8+XHJcbiAgICAgIDx1bD5cclxuICAgICAgICA8bGkgKm5nSWY9XCJsb2dnZWRJblwiIFtuZ0NsYXNzXT1cImlzSG9tZVVybCA/ICdob21lLXVybCcgOiAnJ1wiIGNsYXNzPVwicHJvamVjdFwiIChjbGljayk9XCJuYXZpZ2F0ZVRvUHJvamVjdHMoKVwiPlByb2plY3RzPC9saT5cclxuICAgICAgPC91bD5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBbbmdDbGFzc109XCIhbG9nZ2VkSW4gPyAncmlnaHQtc2lkZSBub3QtbG9nZ2VkLWluJyA6ICdyaWdodC1zaWRlJ1wiPlxyXG4gICAgICA8aW1nXHJcbiAgICAgICAgKm5nSWY9XCJsb2dnZWRJblwiXHJcbiAgICAgICAgY2xhc3M9XCJoZWxwXCJcclxuICAgICAgICBbc3JjXT1cImltYWdlU3JjXCJcclxuICAgICAgICAobW91c2VlbnRlcik9XCJpbWFnZVNyYyA9ICcvYXNzZXRzL2hlbHBfYmxldS5zdmcnXCJcclxuICAgICAgICAobW91c2VsZWF2ZSk9XCJpbWFnZVNyYyA9ICcvYXNzZXRzL2hlbHAuc3ZnJ1wiXHJcbiAgICAgICAgYWx0PVwiaGVscCBTVkdcIlxyXG4gICAgICAgIFttYXRUb29sdGlwXT1cImhlbHBGYXFUb29sdGlwXCJcclxuICAgICAgICAoY2xpY2spPVwibmF2aWdhdGVUb0hlbHAoKVwiXHJcbiAgICAgIC8+XHJcbiAgICAgIDxkaXYgKm5nSWY9XCJsb2dnZWRJblwiIGNsYXNzPVwiaW5pdGlhbFwiIG1hdC1idXR0b24gW21hdE1lbnVUcmlnZ2VyRm9yXT1cIm1lbnVcIj5cclxuICAgICAgICB7eyBpbml0aWFscyB8IHVwcGVyY2FzZSB9fVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cInNlbGVjdGVkLWxhbmd1YWdlXCIgW21hdE1lbnVUcmlnZ2VyRm9yXT1cIm1lbnVMYW5ndWFnZVwiPnt7IHNlbGVjdGVkTGFuZ3VhZ2UgfX08L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L2Rpdj5cclxuXHJcbjwhLS0gc3dpdGNoIGJldHdlZW4gbGFuZ3VhZ2UtLT5cclxuPG1hdC1tZW51IHBhbmVsQ2xhc3M9XCJwYW5lbC1tZW51XCIgI21lbnVMYW5ndWFnZT1cIm1hdE1lbnVcIiBjbGFzcz1cImxhbmd1YWdlLW1lbnUtaXRlbVwiPlxyXG4gIDxkaXYgY2xhc3M9XCJtZW51LWxhbmd1YWdlXCI+XHJcbiAgICA8YnV0dG9uIG1hdC1tZW51LWl0ZW0gIChjbGljayk9XCJzZXRMYW5ndWFnZShzZWNvbmRMYW5ndWFnZSlcIj57eyBzZWNvbmRMYW5ndWFnZSB9fTwvYnV0dG9uPlxyXG4gIDwvZGl2PlxyXG48L21hdC1tZW51PlxyXG5cclxuPG1hdC1tZW51ICNtZW51PVwibWF0TWVudVwiID5cclxuICA8ZGl2IGNsYXNzPVwiYXZhdGFyLXBvcHVwXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwidXNlci1kZXRhaWxzLWNvbnRhaW5lclwiPlxyXG4gICAgICA8dWw+XHJcbiAgICAgICAgPGxpIGNsYXNzPVwidXNlcm5hbWVcIj5cclxuICAgICAgICAgIHt7IHVzZXJuYW1lIH19XHJcbiAgICAgICAgPC9saT5cclxuICAgICAgICA8bGkgY2xhc3M9XCJ1c2VyRW1haWxcIj5cclxuICAgICAgICAgIHt7IGVtYWlsIH19XHJcbiAgICAgICAgPC9saT5cclxuICAgICAgICA8bGkgY2xhc3M9XCJ1c2VyUm9sZVwiICpuZ0lmPVwicm9sZVwiPlxyXG4gICAgICAgICAge3sgcm9sZSB9fVxyXG4gICAgICAgIDwvbGk+XHJcbiAgICAgIDwvdWw+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxociAvPlxyXG4gICAgPGRpdiBjbGFzcz1cImFjdGlvbnMtY29udGFpbmVyXCI+XHJcbiAgICAgIDxidXR0b24gY2xhc3M9XCJoZWFkZXItbWVudVwiIChjbGljayk9XCJuYXZpZ2F0ZVRvTWFuYWdlVGVhbSgpXCIgKm5nSWY9XCJyb2xlID09PSB1c2VyUm9sZXMuQURNSU5cIj5NYW5hZ2UgdGVhbTwvYnV0dG9uPlxyXG4gICAgICA8YnV0dG9uIGNsYXNzPVwiaGVhZGVyLW1lbnVcIiAoY2xpY2spPVwibmF2aWdhdGVUb0FjY291bnRTZXR0aW5ncygpXCI+QWNjb3VudCBzZXR0aW5nczwvYnV0dG9uPlxyXG4gICAgICA8YnV0dG9uIGNsYXNzPVwiaGVhZGVyLW1lbnVcIiAoY2xpY2spPVwibG9nT3V0KClcIj5Mb2cgb3V0PC9idXR0b24+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuPC9tYXQtbWVudT5cclxuIl19